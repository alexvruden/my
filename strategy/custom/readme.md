# Применение wf-raw<br>
<br>
Нельзя создать два процесса стратегии с фильтром <code>--wf-tcp</code> ( <code>--wf-udp</code> ) на одном порте, поэтому применим <code>--wf-raw</code>.
<br>
Используя <code>--wf-raw</code> мы можем в '<i>windivert</i>' на одном порте, но в разных процессах отсеивать трафик.
<br>
Это удобно использовать при отладке, исключая лишний трафик в окне консоли.
<br>
Фильтр можно написать самостоятельно и запускать с ключом <code>--wf-raw=@filename</code>
<br>
Либо задать строку в стратегии, скрипт сам сгенерирует фильтр.
<br>
<br>
Strategy 1 ------------------------------------------------------------------------------<br>
<br>
<code>#test strategy 1</code>
<br>
<br>
<code>$tcp: 443 RAW iprange1</code> - скрипт прочтет строку и запомнит как описание этой стратегии
<br>
<code>--wf-raw={raw_tcp443_iprange1.txt}{tcp}{443}{1.1.1.1}</code>
<br>
<br>
<code>$rule 1: iprange1</code> - скрипт прочтет строку и добавит к предыдущуму описанию
<br>
<code>
TAMPER
</code>
<br>
<code>#--blabla</code> - закоменировали, скрипт проигнорирует строку
<br>
<br>
Strategy 2 ------------------------------------------------------------------------------<br>
<br>
<code>#test strategy 2</code>
<br>
<br>
<code>$tcp: 443 RAW iprange2</code> - скрипт прочтет строку и запомнит как описание этой стратегии
<br>
<code>--wf-raw={raw_tcp443_iprange2.txt}{tcp}{443}{8.8.8.8}</code>
<br>
<br>
<code>$rule 1: iprange2</code> - скрипт прочтет строку и добавит к предыдущуму описанию
<br>
<code>
TAMPER
</code>
<br>
<br>
После запуска будет создано два процесса '<i>winws</i>' со своими профилями на одном порту 443.
<br>
При включенном режиме отладки в одном окне консоли будет трафик от 1.1.1.1:443, а во втором окне трафик от 8.8.8.8:443
<br>
<br>
Ключ <code>--wf-raw</code> в скрипте принимает значения 
<br>
<br>
<code>--wf-raw=@filename</code> - путь к файлу с фильтром не указываем, файл должен находиться рядом с файлом стратегии
<br>
<code>--wf-raw={filename}{tcp|udp}{port,...,port1-port2}{address,...,address1-address2}</code> - Скрипт сгенерирует фильтр и сохранит в файле <code>filename</code>
<br>
Фильт будет содержать ВКЛЮЧАЮЩЕЕ правило для <code>address</code> и <code>port</code>
<br>
<br>
<code>--wf-raw={filename}{tcp|udp}{~port...,~port1-port2}{~address,...,~address1-address2}</code> - Скрипт сгенерирует фильтр и сохранит в файле <code>filename</code>
<br>
Фильт будет содержать ИСКЛЮЧАЮЩЕЕ правило для <code>address</code> и <code>port</code>
<br>
<br>